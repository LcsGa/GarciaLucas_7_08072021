<p-card styleClass="p-shadow-2 p-mt-3">
    <div class="p-d-flex p-jc-between p-pb-4">
        <div class="p-d-flex">
            <p-avatar class="p-mr-3" image="assets/users/user-default.png" shape="circle"></p-avatar>
            <div>
                <p class="p-text-bold">{{post.author.firstname}} {{post.author.lastname}}</p>
                <small>{{post.created_at | date: "dd MMMM YYYY, HH:mm": "": "fr"}}</small>
            </div>
        </div>

        <p-tieredMenu #menu [model]="items" [popup]="true"></p-tieredMenu>
        <button
            pButton
            pRipple
            class="p-button-secondary p-button-icon p-button-rounded p-button-text"
            type="button"
            icon="pi pi-ellipsis-h"
            (click)="menu.toggle($event)"
        ></button>
    </div>

    <p>{{post.content}}</p>

    <p-divider></p-divider>
    <div class="p-d-flex p-jc-between">
        <div class="p-d-flex p-ai-center">
            <p-button
                [styleClass]="isliked ? 'p-mr-2 p-button-text p-button-danger' : 'p-mr-2 p-button-text p-button-secondary'"
                icon="pi pi-heart"
                label="J'aime"
                [badge]="likes.length ? likes.length + '' : ''"
                [badgeClass]="isliked ? 'p-badge-danger' : 'p-badge-secondary'"
                (click)="like()"
            ></p-button>
            <button
                pButton
                pRipple
                class="p-button-secondary p-button-text"
                icon="pi pi-comment"
                label="Commenter"
                (click)="showCommentForm(commentTextArea)"
            ></button>
        </div>

        <button
            pButton
            pRipple
            [class]="post.comments.length ? 'p-button-secondary p-button-text' : 'p-d-none'"
            (click)="showComments()"
        >
            {{post.comments.length + (post.comments.length > 1 ? ' commentaires' : ' commentaire')}}
        </button>
    </div>

    <div *ngFor="let comment of post.comments">
        <p>{{comment}}</p>
    </div>

    <form [class]="commentFormShown ? 'p-mt-3 p-d-flex p-ai-center' : 'p-d-none'" (ngSubmit)="sendComment()">
        <p-avatar class="p-mr-3" image="assets/users/user-default.png" shape="circle"></p-avatar>
        <textarea
            #commentTextArea
            pInputTextarea
            style="flex: 1;"
            [autoResize]="true"
            rows="1"
            placeholder="Ecrivez un commentaire..."
            [formControl]="commentMessage"
        ></textarea>
        <button
            pButton
            pRipple
            class="p-ml-2 p-button-icon p-button-rounded"
            icon="pi pi-send"
            [disabled]="!commentMessage.valid"
        ></button>
    </form>
</p-card>
